<template>
  <view class="detail">
    <view class="detail-container">
      <view class="detail-title">{{title}}</view>
      <view class="detail-part">
        <text class="iconfont icon-naozhong"></text>
        <view class="detail-info">{{starttime}}至{{endtime}}</view>
      </view>
      <view class="detail-part">
        <text class="iconfont icon-fangzi"></text>
        <view class="detail-info">
          <view>房源面积{{area}}，</view>
          <view>均价{{average_price}}元，</view>
          <view>房源数{{housenum}}套，无房家庭倾斜{{nohouse}}%</view>
        </view>  
      </view>
      <view class="detail-part">
        <text class="iconfont icon-sponsor"></text>
        <view class="detail-info">{{money}}万现金存款证明</view>
      </view>
    </view>
    <view class="navto" bindtap="goto">
      <view class="navicon"><text class="iconfont icon-location_light"></text></view>
      <view class="navtext">导航</view>
    </view>
  </view>
</template>
<script>
import wepy from 'wepy'
import host from '../config.js'
export default class Profile extends wepy.page {
  config = {
    navigationBarTitleText: '楼盘详情'
  }
  data = {
    title:'',
    housenum: '',
    nohouse: '',
    money: '',
    area: '',
    average_price: '',
    starttime: '',
    endtime: '',
    locate:''
  }
  onLoad (option) {
    var id = option.id
    var that = this
    wx.request({
      url: host.service.getBuildDetail,
      method: 'POST',
      data: {
        id: id
      },
      success: function (res) {
        var data = res.data.data[0]
        that.title = data.building
        that.money = data.money
        that.housenum = data.housenum
        that.nohouse = data.nohouse
        that.area = data.area
        that.locate = data.coordinate
        that.average_price = data.average_price
        that.starttime = data.starttime
        that.endtime = data.endtime
        that.$apply()
      }
    })
  }
  goto(){
    var location = this.locate.split(',')
    wx.openLocation({
      latitude: location[1] - 0,
      name: this.title,
      longitude: location[0] - 0,
      scale: 18
    })
  }
}
</script>
<style>
  .detail{
    padding: 15px;
  }
  .detail-container{
    padding: 15px;
    border:1px solid #e9e9e9;
    border-radius:3px;
  }
  .detail-title{
    border-bottom:1px solid #e9e9e9;
    padding-bottom: 5px;
    font-size:18px;
  }
  .detail-part{
    font-size:16px;
    padding-top: 5px;
    padding-bottom: 5px;
    border-bottom:1px solid #e9e9e9;
  }
  .detail-part:last-child{
    border-bottom:none;
    padding-bottom: 0;
  }
  .detail-part{
    display: block;
    line-height: 32px;
  }
  .detail-part .iconfont{
    float: left;
    margin-right: 8px;
  }
  .detail-info{
    margin-left: 25px;
  }
  .navto{
    width:40px;
    margin:20px auto;
  }
  .navicon{
    width: 40px;
    height: 40px;
    line-height: 40px;
    text-align:center;
    border-radius:50%;
    color: #fc7272;
    font-size:18px!important;
    border: 1px solid #fc7272;
  }
  .navtext{
    font-size: 14px;
    padding-top: 5px;
    text-align: center;
  }
</style>
